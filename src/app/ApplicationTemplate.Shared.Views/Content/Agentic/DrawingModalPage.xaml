<Page x:Class="ApplicationTemplate.Views.Content.DrawingModalPage"
	  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	  xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	  xmlns:not_win="http://uno.ui/not_win"
	  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	  xmlns:viewmodels="using:ApplicationTemplate.Presentation.ViewModels.Agentic"
	  xmlns:toolkit="using:Uno.UI.Toolkit"
	  mc:Ignorable="d not_win"
	  d:DataContext="{d:DesignInstance viewmodels:DrawingModalViewModel}"
	  Background="{ThemeResource BackgroundBrush}">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>

		<!-- CommandBar -->
		<CommandBar Grid.Row="0"
					Content="{Binding Title}">
			<toolkit:CommandBarExtensions.NavigationCommand>
				<AppBarButton Command="{Binding CloseCommand}"
							  Foreground="{StaticResource AlternateOnBackgroundBrush}">
					<AppBarButton.Icon>
						<BitmapIcon UriSource="ms-appx:///Assets/CommandBar/closeIcon.png" />
					</AppBarButton.Icon>
				</AppBarButton>
			</toolkit:CommandBarExtensions.NavigationCommand>
		</CommandBar>

		<!-- Description -->
		<TextBlock Grid.Row="1"
				   Text="{Binding Description}"
				   Style="{StaticResource BodyMedium}"
				   Visibility="{Binding Description, Converter={StaticResource EmptyStringToCollapsed}}"
				   Margin="20,16,20,0"
				   Foreground="{ThemeResource OnSurfaceVariantBrush}"
				   TextWrapping="Wrap" />

		<!-- SVG Canvas -->
		<ScrollViewer Grid.Row="2"
					  HorizontalScrollBarVisibility="Auto"
					  VerticalScrollBarVisibility="Auto"
					  ZoomMode="Enabled"
					  MinZoomFactor="0.5"
					  MaxZoomFactor="5.0"
					  Margin="20,16,20,20">
			<Grid Background="{ThemeResource SurfaceBrush}"
				  Padding="16"
				  HorizontalAlignment="Center"
				  VerticalAlignment="Center"
				  CornerRadius="8">

				<!-- SVG Content using WebView2 for rendering -->
				<Border BorderBrush="{ThemeResource OutlineBrush}"
						BorderThickness="1"
						Background="{ThemeResource SurfaceBrush}"
						CornerRadius="4"
						MinWidth="400"
						MinHeight="400">
					<WebView2 x:Name="SvgWebView"
							  Width="500"
							  Height="500"
							  HorizontalAlignment="Stretch"
							  VerticalAlignment="Stretch" />
				</Border>
			</Grid>
		</ScrollViewer>
	</Grid>
</Page>
